{
  "dashboard": {
    "id": "drouple-mobile-feature-adoption",
    "uid": "drouple_mobile_features",
    "title": "Drouple Mobile - Feature Adoption & Usage",
    "tags": ["mobile", "features", "adoption"],
    "timezone": "UTC",
    "refresh": "30s",
    "time": {
      "from": "now-7d",
      "to": "now"
    },
    "panels": [
      {
        "id": 1,
        "title": "🚀 Feature Adoption Overview",
        "type": "row",
        "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 },
        "collapsed": false
      },
      {
        "id": 2,
        "title": "Feature First Use Funnel",
        "type": "barchart",
        "gridPos": { "h": 10, "w": 24, "x": 0, "y": 1 },
        "targets": [
          {
            "expr": "sum by (feature_name) (mobile_feature_adoption_total{action=\"first_use\"})",
            "legendFormat": "{{ feature_name }}"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "unit": "short"
          }
        },
        "options": {
          "orientation": "horizontal",
          "xField": "feature_name",
          "legend": {
            "displayMode": "list",
            "placement": "right"
          }
        }
      },
      {
        "id": 3,
        "title": "📱 Core Feature Usage",
        "type": "row",
        "gridPos": { "h": 1, "w": 24, "x": 0, "y": 11 },
        "collapsed": false
      },
      {
        "id": 4,
        "title": "Check-in Feature Usage",
        "type": "timeseries",
        "gridPos": { "h": 8, "w": 8, "x": 0, "y": 12 },
        "targets": [
          {
            "expr": "sum(rate(mobile_checkin_started_total[5m]))",
            "legendFormat": "Check-in Started"
          },
          {
            "expr": "sum(rate(mobile_checkin_completed_total[5m]))",
            "legendFormat": "Check-in Completed"
          },
          {
            "expr": "sum(rate(mobile_checkin_qr_scanned_total[5m]))",
            "legendFormat": "QR Scans"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "unit": "reqps"
          }
        }
      },
      {
        "id": 5,
        "title": "Events Feature Usage",
        "type": "timeseries",
        "gridPos": { "h": 8, "w": 8, "x": 8, "y": 12 },
        "targets": [
          {
            "expr": "sum(rate(mobile_event_views_total[5m]))",
            "legendFormat": "Event Views"
          },
          {
            "expr": "sum(rate(mobile_event_rsvp_total[5m]))",
            "legendFormat": "RSVPs"
          },
          {
            "expr": "sum(rate(mobile_event_shared_total[5m]))",
            "legendFormat": "Events Shared"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "unit": "reqps"
          }
        }
      },
      {
        "id": 6,
        "title": "Directory & Groups Usage",
        "type": "timeseries",
        "gridPos": { "h": 8, "w": 8, "x": 16, "y": 12 },
        "targets": [
          {
            "expr": "sum(rate(mobile_directory_searches_total[5m]))",
            "legendFormat": "Directory Searches"
          },
          {
            "expr": "sum(rate(mobile_group_views_total[5m]))",
            "legendFormat": "Group Views"
          },
          {
            "expr": "sum(rate(mobile_group_join_requests_total[5m]))",
            "legendFormat": "Join Requests"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "unit": "reqps"
          }
        }
      },
      {
        "id": 7,
        "title": "🎯 Conversion Rates",
        "type": "row",
        "gridPos": { "h": 1, "w": 24, "x": 0, "y": 20 },
        "collapsed": false
      },
      {
        "id": 8,
        "title": "Check-in Conversion Funnel",
        "type": "stat",
        "gridPos": { "h": 6, "w": 6, "x": 0, "y": 21 },
        "targets": [
          {
            "expr": "(sum(rate(mobile_checkin_completed_total[1h])) / sum(rate(mobile_checkin_started_total[1h]))) * 100",
            "legendFormat": "Completion Rate %"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "thresholds": {
              "steps": [
                { "color": "red", "value": 0 },
                { "color": "yellow", "value": 70 },
                { "color": "green", "value": 90 }
              ]
            },
            "unit": "percent"
          }
        }
      },
      {
        "id": 9,
        "title": "Event RSVP Conversion",
        "type": "stat",
        "gridPos": { "h": 6, "w": 6, "x": 6, "y": 21 },
        "targets": [
          {
            "expr": "(sum(rate(mobile_event_rsvp_total[1h])) / sum(rate(mobile_event_views_total[1h]))) * 100",
            "legendFormat": "RSVP Rate %"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "thresholds": {
              "steps": [
                { "color": "red", "value": 0 },
                { "color": "yellow", "value": 25 },
                { "color": "green", "value": 40 }
              ]
            },
            "unit": "percent"
          }
        }
      },
      {
        "id": 10,
        "title": "Group Join Conversion",
        "type": "stat",
        "gridPos": { "h": 6, "w": 6, "x": 12, "y": 21 },
        "targets": [
          {
            "expr": "(sum(rate(mobile_group_join_requests_total[1h])) / sum(rate(mobile_group_views_total[1h]))) * 100",
            "legendFormat": "Join Rate %"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "thresholds": {
              "steps": [
                { "color": "red", "value": 0 },
                { "color": "yellow", "value": 15 },
                { "color": "green", "value": 25 }
              ]
            },
            "unit": "percent"
          }
        }
      },
      {
        "id": 11,
        "title": "Pathway Enrollment Rate",
        "type": "stat",
        "gridPos": { "h": 6, "w": 6, "x": 18, "y": 21 },
        "targets": [
          {
            "expr": "(sum(rate(mobile_pathway_enrollments_total[1h])) / sum(rate(mobile_pathway_views_total[1h]))) * 100",
            "legendFormat": "Enrollment Rate %"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "thresholds": {
              "steps": [
                { "color": "red", "value": 0 },
                { "color": "yellow", "value": 30 },
                { "color": "green", "value": 50 }
              ]
            },
            "unit": "percent"
          }
        }
      },
      {
        "id": 12,
        "title": "📊 Feature Depth Analysis",
        "type": "row",
        "gridPos": { "h": 1, "w": 24, "x": 0, "y": 27 },
        "collapsed": false
      },
      {
        "id": 13,
        "title": "Feature Depth Score Distribution",
        "type": "histogram",
        "gridPos": { "h": 8, "w": 12, "x": 0, "y": 28 },
        "targets": [
          {
            "expr": "histogram_quantile(0.50, sum by (le) (rate(mobile_feature_depth_score_bucket[5m])))",
            "legendFormat": "P50 Feature Depth"
          },
          {
            "expr": "histogram_quantile(0.95, sum by (le) (rate(mobile_feature_depth_score_bucket[5m])))",
            "legendFormat": "P95 Feature Depth"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "unit": "short"
          }
        }
      },
      {
        "id": 14,
        "title": "Power Users vs Casual Users",
        "type": "piechart",
        "gridPos": { "h": 8, "w": 12, "x": 12, "y": 28 },
        "targets": [
          {
            "expr": "sum(mobile_users_by_usage_frequency{frequency=\"daily\"})",
            "legendFormat": "Daily Users"
          },
          {
            "expr": "sum(mobile_users_by_usage_frequency{frequency=\"weekly\"})",
            "legendFormat": "Weekly Users"
          },
          {
            "expr": "sum(mobile_users_by_usage_frequency{frequency=\"monthly\"})",
            "legendFormat": "Monthly Users"
          },
          {
            "expr": "sum(mobile_users_by_usage_frequency{frequency=\"rare\"})",
            "legendFormat": "Rare Users"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "unit": "short"
          }
        },
        "options": {
          "pieType": "pie",
          "reduceOptions": {
            "calcs": ["lastNotNull"]
          }
        }
      },
      {
        "id": 15,
        "title": "🔔 Push Notification Performance",
        "type": "row",
        "gridPos": { "h": 1, "w": 24, "x": 0, "y": 36 },
        "collapsed": false
      },
      {
        "id": 16,
        "title": "Push Notification Metrics",
        "type": "timeseries",
        "gridPos": { "h": 8, "w": 12, "x": 0, "y": 37 },
        "targets": [
          {
            "expr": "sum(rate(mobile_push_sent_total[5m]))",
            "legendFormat": "Sent"
          },
          {
            "expr": "sum(rate(mobile_push_delivered_total[5m]))",
            "legendFormat": "Delivered"
          },
          {
            "expr": "sum(rate(mobile_push_clicked_total[5m]))",
            "legendFormat": "Clicked"
          },
          {
            "expr": "sum(rate(mobile_push_dismissed_total[5m]))",
            "legendFormat": "Dismissed"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "unit": "reqps"
          }
        }
      },
      {
        "id": 17,
        "title": "Push CTR by Type",
        "type": "barchart",
        "gridPos": { "h": 8, "w": 12, "x": 12, "y": 37 },
        "targets": [
          {
            "expr": "(sum by (notification_type) (rate(mobile_push_clicked_total[1h])) / sum by (notification_type) (rate(mobile_push_delivered_total[1h]))) * 100",
            "legendFormat": "{{ notification_type }}"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "unit": "percent"
          }
        },
        "options": {
          "orientation": "horizontal"
        }
      },
      {
        "id": 18,
        "title": "🏆 Feature Champions",
        "type": "row",
        "gridPos": { "h": 1, "w": 24, "x": 0, "y": 45 },
        "collapsed": false
      },
      {
        "id": 19,
        "title": "Top Features by Engagement",
        "type": "table",
        "gridPos": { "h": 8, "w": 12, "x": 0, "y": 46 },
        "targets": [
          {
            "expr": "topk(10, sum by (feature_name) (rate(mobile_feature_usage_total[1h])))",
            "legendFormat": "{{ feature_name }}",
            "format": "table"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "unit": "reqps"
          }
        },
        "options": {
          "showHeader": true
        }
      },
      {
        "id": 20,
        "title": "Feature Abandonment Risk",
        "type": "table",
        "gridPos": { "h": 8, "w": 12, "x": 12, "y": 46 },
        "targets": [
          {
            "expr": "bottomk(5, avg_over_time(mobile_feature_usage_total[7d]))",
            "legendFormat": "{{ feature_name }}",
            "format": "table"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "thresholds": {
              "steps": [
                { "color": "green", "value": 0 },
                { "color": "yellow", "value": 50 },
                { "color": "red", "value": 100 }
              ]
            },
            "unit": "short"
          }
        },
        "options": {
          "showHeader": true
        }
      }
    ]
  }
}
